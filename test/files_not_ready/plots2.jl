using GLMakie, ColorSchemes

y = [0,	25,	50,	75,	100, 125,	150,	175,	200,	225,	250,	275,	300]
x = [0,	25,	50,	75,	100, 125,	150,	175,	200]

zbase =[
    1404.98	1404.98	1404.98	1404.98	1404.98	1404.98	1404.98	1404.98	1404.98	1404.98	1404.98	1404.98	1404.98;
    1404.98	1361.24	1325.38	1296.18	1277.36	1261.91	1249.02	1237.45	1227.04	1217.77	1210.08	1204.02	1199.96;
    1404.98	1361.24	1323.23	1290.50	1259.96	1232.53	1207.74	1189.57	1173.35	1158.76	1145.05	1132.56	1120.67;
    1404.98	1361.24	1323.23	1289.62	1258.77	1229.96	1203.03	1178.34	1155.21	1134.73	1117.53	1102.18	1087.64;
    1404.98	1361.24	1323.23	1289.62	1258.34	1229.35	1202.20	1176.73	1152.88	1131.15	1110.81	1091.66	1074.15;
    1404.98	1361.24	1323.23	1289.62	1258.34	1229.17	1201.91	1176.32	1152.37	1130.24	1109.53	1090.10	1071.85;
    1404.98	1361.24	1323.23	1289.62	1258.34	1229.17	1201.86	1176.19	1152.14	1129.95	1109.18	1089.52	1070.99;
    1404.98	1361.24	1323.23	1289.62	1258.34	1229.17	1201.86	1176.17	1152.09	1129.86	1109.04	1089.33	1070.75;
    1404.98	1361.24	1323.23	1289.62	1258.34	1229.17	1201.86	1176.17	1152.09	1129.85	1109.03	1089.28	1070.66
]

f = Figure(resolution=(1200, 800), fontsize=24)
axs =Axis3(f[1,1]; title = "System EENS, ESS at bus 8", 
            xlabel = "Power Rating (MW)", ylabel = "Energy Rating (MWh)", 
            zlabel = "EENS (MWh/y)",
            azimuth = -π/5,
            perspectiveness=0.0,
            elevation=π/6,
            zlabeloffset=100,
            xlabeloffset=70,
            ylabeloffset=70,
            xticks = WilkinsonTicks(6; k_min = 4),
            yticks = WilkinsonTicks(6; k_min = 4),
            zticks = WilkinsonTicks(6; k_min = 4),
            #aspect = (1,1,0.75)
            #aspect = :data
)

#cmap = (Reverse(:Spectral_11), 0.9)
cmap = (:viridis, 1)
s = surface!(axs, (x), y, zbase, color = zbase, colormap=cmap)
wireframe!(axs,(x), y, zbase, shading=false, color = :black, linewidth=0.7, overdraw=true, transparency=true)
xmin, ymin, zmin = minimum(axs.finallimits[])
xmax, ymax, zmax = maximum(axs.finallimits[])
#contourf!(axs, x,0, y, zbase; colormap=cmap,transformation=(:xy, zmin))
rowgap!(f.layout, 80)
Colorbar(f[2, 1], s, width=Relative(0.5), flipaxis = false, vertical = false)
#save("figure1.png", f)



zmodified = [
    1789.69	1789.69	1789.69	1789.69	1789.69	1789.69	1789.69	1789.69	1789.69	1789.69	1789.69	1789.69	1789.69;
    1789.69	1733.62	1688.57	1651.74	1627.15	1606.73	1588.98	1573.53	1559.49	1546.87	1536.63	1528.65	1523.31;
    1789.69	1733.62	1685.85	1644.11	1605.94	1571.53	1539.95	1515.96	1494.38	1474.89	1456.40	1439.32	1423.34;
    1789.69	1733.62	1685.85	1642.96	1604.32	1568.17	1534.02	1502.31	1472.48	1445.43	1422.44	1401.64	1381.78;
    1789.69	1733.62	1685.85	1642.96	1603.67	1567.29	1532.85	1500.30	1469.57	1440.89	1414.07	1388.79	1364.86;
    1789.69	1733.62	1685.85	1642.96	1603.67	1567.03	1532.44	1499.75	1468.92	1439.80	1412.40	1386.76	1362.18;
    1789.69	1733.62	1685.85	1642.96	1603.67	1567.03	1532.34	1499.61	1468.70	1439.52	1412.06	1386.10	1361.20;
    1789.69	1733.62	1685.85	1642.96	1603.67	1567.03	1532.34	1499.58	1468.66	1439.44	1411.94	1385.94	1360.95;
    1789.69	1733.62	1685.85	1642.96	1603.67	1567.03	1532.34	1499.58	1468.65	1439.43	1411.91	1385.88	1360.86
    ]

cmap = (:viridis, 1)
s = surface!(axs,(x) ,y , zmodified , color = zmodified, colormap=cmap)
wireframe!(axs,(x), y, zmodified, shading=false, color = :black, linewidth=0.7, overdraw=true, transparency=false)
xmin, ymin, zmin = minimum(axs.finallimits[])
xmax, ymax, zmax = maximum(axs.finallimits[])
save("figure4.png", f)