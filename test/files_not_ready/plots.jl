using GLMakie, ColorSchemes

y = [0,	25,	50,	75,	100, 125,	150,	175,	200,	225,	250,	275,	300]
x = [0,	25,	50,	75,	100, 125,	150,	175,	200]

z =[
    1404.98	1404.98	1404.98	1404.98	1404.98	1404.98	1404.98	1404.98	1404.98	1404.98	1404.98	1404.98	1404.98;
    1404.98	1361.24	1325.38	1296.18	1277.36	1261.91	1249.02	1237.45	1227.04	1217.77	1210.08	1204.02	1199.96;
    1404.98	1361.24	1323.23	1290.50	1259.96	1232.53	1207.74	1189.57	1173.35	1158.76	1145.05	1132.56	1120.67;
    1404.98	1361.24	1323.23	1289.62	1258.77	1229.96	1203.03	1178.34	1155.21	1134.73	1117.53	1102.18	1087.64;
    1404.98	1361.24	1323.23	1289.62	1258.34	1229.35	1202.20	1176.73	1152.88	1131.15	1110.81	1091.66	1074.15;
    1404.98	1361.24	1323.23	1289.62	1258.34	1229.17	1201.91	1176.32	1152.37	1130.24	1109.53	1090.10	1071.85;
    1404.98	1361.24	1323.23	1289.62	1258.34	1229.17	1201.86	1176.19	1152.14	1129.95	1109.18	1089.52	1070.99;
    1404.98	1361.24	1323.23	1289.62	1258.34	1229.17	1201.86	1176.17	1152.09	1129.86	1109.04	1089.33	1070.75;
    1404.98	1361.24	1323.23	1289.62	1258.34	1229.17	1201.86	1176.17	1152.09	1129.85	1109.03	1089.28	1070.66
]


f = Figure(resolution=(1200, 800), fontsize=24)
axs =Axis3(f[1,1]; title = "System EENS, BESS at bus 7", 
            xlabel = "Power Rating (MW)", ylabel = "Energy Rating (MWh)", 
            zlabel = "EENS (MWh/y)",
            azimuth = -π/5,
            perspectiveness=0.0,
            elevation=π/6,
            zlabeloffset=120,
            xlabeloffset=70,
            ylabeloffset=70,
            xticks = WilkinsonTicks(6; k_min = 4),
            yticks = WilkinsonTicks(6; k_min = 4),
            zticks = WilkinsonTicks(6; k_min = 3),
            #aspect = (1,1,0.75)
            #aspect = :data
)

#cmap = (Reverse(:Spectral_11), 0.9)
cmap = (:viridis, 1)
s = surface!(axs,(x) ,y , z , color = z, colormap=cmap)
#contour3d!(axs, x, y, z .+ 0.02; levels=20, linewidth=2)
wireframe!(axs,(x), y, z, shading=false, color = :black, linewidth=0.7, overdraw=true, transparency=true)
xmin, ymin, zmin = minimum(axs.finallimits[])
xmax, ymax, zmax = maximum(axs.finallimits[])
#contour!(axs, x, y, z; colormap=:Spectral_11, levels=20,transformation=(:xy, zmax))
#contourf!(axs, x, y, z; colormap=cmap,transformation=(:xy, zmin))
#Colorbar(f[1, 2], s, width=15, ticksize=15, height=Relative(0.5), flipaxis = false)

#save("figure1.png", f)


z2 = [
    1404.980103	1404.980103	1404.980103	1404.980103	1404.980103	1404.980103	1404.980103	1404.980103	1404.980103	1404.980103	1404.980103	1404.980103	1404.980103;
    1404.980103	1133.52862	1118.64149	1109.2555	1103.30697	1098.77293	1095.24458	1092.38161	1090.08912	1088.11178	1086.57381	1085.37528	1084.47627;
    1404.980103	1133.52862	1118.02078	1107.73875	1099.24098	1092.15776	1086.0284	1081.70575	1078.06692	1074.84044	1071.83577	1069.08844	1066.51617;
    1404.980103	1133.52862	1118.02078	1107.51337	1098.87436	1091.34374	1084.67874	1078.9595	1073.85848	1069.26218	1065.45043	1062.03376	1058.74917;
    1404.980103	1133.52862	1118.02078	1107.51337	1098.72927	1091.12685	1084.39356	1078.42789	1073.05295	1068.12667	1063.61356	1059.37198	1055.48998;
    1404.980103	1133.52862	1118.02078	1107.51337	1098.72927	1091.11671	1084.36647	1078.39509	1073.0133	1068.04122	1063.50754	1059.24831	1055.2712;
    1404.980103	1133.52862	1118.02078	1107.51337	1098.72927	1091.11671	1084.36647	1078.39509	1073.0133	1068.04122	1063.50754	1059.24831	1055.2712;
    1404.980103	1133.52862	1118.02078	1107.51337	1098.72927	1091.11671	1084.36647	1078.39509	1073.0133	1068.04122	1063.50754	1059.24831	1055.2712;
    1404.980103	1133.52862	1118.02078	1107.51337	1098.72927	1091.11671	1084.36647	1078.39509	1073.0133	1068.04122	1063.50754	1059.24831	1055.2712
    
    ]

cmap = (:viridis, 0.9)
s = surface!(axs,(x) ,y , z2 , color = z, colormap=cmap)
#contour3d!(axs, x, y, z .+ 0.02; levels=20, linewidth=2)
wireframe!(axs,(x), y, z2, shading=false, color = :black, linewidth=0.7, overdraw=true, transparency=true)
xmin, ymin, zmin = minimum(axs.finallimits[])
xmax, ymax, zmax = maximum(axs.finallimits[])
#contour!(axs, x, y, z; colormap=:Spectral_11, levels=20,transformation=(:xy, zmax))
#contourf!(axs, x, y, z; colormap=cmap,transformation=(:xy, zmin))
#Colorbar(f[1, 2], s, width=15, ticksize=15, height=Relative(0.5), flipaxis = false)
save("figure10.png", f)